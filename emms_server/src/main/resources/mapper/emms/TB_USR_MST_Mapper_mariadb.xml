<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.emms.mapper.TB_USR_MST_Mapper">
	
	<!-- 로그인, 아이디 패스워드로 조회 -->
	<select id="TB_USR_MST_PS001" resultType="LoginVO" >
		SELECT  T1.USR_NUM
		       ,T1.USR_NAME
		       ,T1.USR_BIR_MD
		       ,T1.USR_EMAIL
		       ,T1.USR_TEL_NUM
		       ,T1.USR_ADR
		       ,T1.INC_CD
		       ,T1.APO_CD
		       ,T1.EDU_CD
		       ,T1.TIM_NUM
		       ,T1.LOGIN_ID
		       ,T1.PASS_NUM
		       ,T1.JOIN_YN
		       ,T1.DEL_YN
		       ,T1.RMK
		       ,T1.CRT_DTM
		       ,T1.CRT_USR_NUM
		       ,T1.MDF_DTM
		       ,T1.MDF_USR_NUM
		       ,T2.TIM_NM
		  FROM TB_USR_MST T1
		       LEFT OUTER JOIN TB_TIM_MST T2
		                    ON T1.TIM_NUM = T2.TIM_NUM
		 WHERE LOGIN_ID = #{loginId}
		   AND PASS_NUM = #{passNum} 
		 LIMIT 0,1
 	</select>	
 	
 	<select id="TB_USR_MST_VL001" parameterType="String" resultType="TB_USR_MST_VO">
 		SELECT  A.USR_NUM
 			   ,A.LOGIN_ID
 			   ,A.USR_NAME
 			   ,A.USR_BIR_MD
 			   ,B.CD_NM AS INC_CD
 			   ,C.AUTH_NM AS APO_CD
 			   ,A.USR_EMAIL
 			   ,A.USR_TEL_NUM
 			   ,D.TIM_NM AS TIM_NUM
 			   ,A.JOIN_YN
 		FROM TB_USR_MST AS A
 		LEFT OUTER JOIN tb_cd_lst AS B
 			   ON A.INC_CD = B.CD_VAL
 		LEFT OUTER JOIN TB_AUTH_MST AS C
 			   ON LEFT(A.APO_CD,'3') = LEFT(C.AUTH_NUM,'3')
 		LEFT OUTER JOIN TB_TIM_MST AS D
 			   ON A.TIM_NUM = D.TIM_NUM
 		ORDER BY A.USR_NUM DESC
 	</select>
	
</mapper>